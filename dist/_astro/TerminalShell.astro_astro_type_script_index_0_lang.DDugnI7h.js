const y=[{text:"════════════════════════════════════════════════════════════════════════════════",delay:0},{text:"",delay:50},{text:"BASEMENT OS (Web Terminal)",delay:100,class:"text-secondary"},{text:"(C) 2025 CloudStrife7",delay:150,class:"text-dim"},{text:"",delay:200},{text:"════════════════════════════════════════════════════════════════════════════════",delay:250},{text:"",delay:300},{text:"POST: Power-On Self Test...",delay:400},{text:"  Checking BIOS.................... OK",delay:600,class:"boot-ok"},{text:"  Memory Test: 640K................ OK",delay:800,class:"boot-ok"},{text:"  Display Adapter.................. OK",delay:1e3,class:"boot-ok"},{text:"",delay:1100},{text:"Loading Devlog...",delay:1300},{text:"  Connecting to GitHub............. OK",delay:1500,class:"boot-ok"},{text:"  Loading blog entries............. OK",delay:1700,class:"boot-ok"},{text:"  Initializing search.............. OK",delay:1900,class:"boot-ok"},{text:"",delay:2e3},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2100},{text:"Boot complete. Welcome to Basement OS.",delay:2300,class:"boot-info"},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2500}];document.addEventListener("astro:page-load",()=>{const n=document.getElementById("boot-screen"),a=document.getElementById("main-content"),i=document.getElementById("nav-menu"),l=document.getElementById("ai-disclosure");let c=0;function f(){if(n)if(c<y.length){const e=y[c],t=document.createElement("div");t.className="boot-line",e.class&&t.classList.add(e.class),t.textContent=e.text,t.style.animationDelay="0s",n.appendChild(t),c++;const o=c<y.length?y[c].delay-e.delay:500;setTimeout(f,o)}else setTimeout(()=>{n.style.display="none",a&&a.classList.add("active"),i&&i.classList.add("active"),l&&(l.style.display="block")},800)}const x=sessionStorage.getItem("basement-os-booted"),E=new URLSearchParams(window.location.search).get("boot")==="true";!x||E?n&&(n.style.display="block",a&&a.classList.remove("active"),i&&i.classList.remove("active"),l&&(l.style.display="none"),c=0,n.innerHTML="",f(),sessionStorage.setItem("basement-os-booted","true")):(n&&(n.style.display="none"),a&&a.classList.add("active"),i&&i.classList.add("active"),l&&(l.style.display="block"));const w=["high-contrast","synthwave","framer-dark","framer-light","solarized-dark","solarized-light","catppuccin","monokai","gruvbox-dark","gruvbox-light","rose-pine","rose-pine-dawn","rose-pine-moon","cappuccino"],d=document.getElementById("theme-select");function L(e){w.includes(e)||(e="synthwave"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("basement-os-theme",e),d&&(d.value=e)}if(d){d.addEventListener("change",t=>{L(t.target.value)});const e=localStorage.getItem("basement-os-theme")||"synthwave";d.value=e}function v(){const t=new Date().toLocaleTimeString("en-US",{hour12:!0}),o=document.getElementById("clock");o&&(o.textContent=t)}window.clockInterval&&clearInterval(window.clockInterval),window.clockInterval=setInterval(v,1e3),v();const h=document.getElementById("btn-reboot"),u=document.getElementById("shutdown-screen");h&&u&&h.addEventListener("click",()=>{u.style.display="flex",document.body.style.cursor="wait",setTimeout(()=>{const e=u.querySelector(".shutdown-msg-1"),t=u.querySelector(".shutdown-msg-2");e&&(e.style.display="none"),t&&(t.style.display="block"),setTimeout(()=>{document.body.classList.add("crt-off"),setTimeout(()=>{sessionStorage.removeItem("basement-os-booted"),window.location.reload()},1e3)},2e3)},2e3)});const b=document.getElementById("search-toggle"),r=document.getElementById("search-container"),g=document.getElementById("search-input"),s=document.getElementById("search-results");b&&r&&g&&(b.addEventListener("click",()=>{r.classList.toggle("active"),r.classList.contains("active")&&g.focus()}),document.addEventListener("keydown",e=>{e.key==="Escape"&&r.classList.contains("active")&&r.classList.remove("active")}),g.addEventListener("input",async e=>{const t=e.target.value;if(t.length<2){s&&(s.innerHTML="");return}s&&(s.innerHTML='<div class="searching">Searching database...</div>');try{const I=await(await import("/pagefind/pagefind.js")).search(t),p=await Promise.all(I.results.slice(0,5).map(m=>m.data()));s&&(p.length===0?s.innerHTML='<div class="no-results">No matching records found.</div>':s.innerHTML=p.map(m=>`
                            <div class="search-result-item">
                                <a href="${m.url}">
                                    <div class="result-title">${m.meta.title}</div>
                                    <div class="result-excerpt">${m.excerpt}</div>
                                </a>
                            </div>
                        `).join(""))}catch(o){console.log("Pagefind not loaded (dev mode)",o),s&&(s.innerHTML=`
                        <div class="result-error">
                            Search index unavailable in DEV mode.<br>
                            Run 'npm run build' to generate index.
                        </div>`)}}))});
