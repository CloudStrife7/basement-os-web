const I=[{text:"════════════════════════════════════════════════════════════════════════════════",delay:0},{text:"",delay:50},{text:"BASEMENT OS (Web Terminal)",delay:100,class:"text-secondary"},{text:"(C) 2025 CloudStrife7",delay:150,class:"text-dim"},{text:"",delay:200},{text:"════════════════════════════════════════════════════════════════════════════════",delay:250},{text:"",delay:300},{text:"POST: Power-On Self Test...",delay:400},{text:"  Checking BIOS.................... OK",delay:600,class:"boot-ok"},{text:"  Memory Test: 640K................ OK",delay:800,class:"boot-ok"},{text:"  Display Adapter.................. OK",delay:1e3,class:"boot-ok"},{text:"",delay:1100},{text:"Loading Devlog...",delay:1300},{text:"  Connecting to GitHub............. OK",delay:1500,class:"boot-ok"},{text:"  Loading blog entries............. OK",delay:1700,class:"boot-ok"},{text:"  Initializing search.............. OK",delay:1900,class:"boot-ok"},{text:"",delay:2e3},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2100},{text:"Boot complete. Welcome to Basement OS.",delay:2300,class:"boot-info"},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2500}];document.addEventListener("astro:page-load",()=>{const n=document.getElementById("boot-screen"),i=document.getElementById("main-content"),y=document.getElementById("nav-menu"),h=document.getElementById("ai-disclosure");let l=0;function r(){if(n)if(l<I.length){const e=I[l],t=document.createElement("div");t.className="boot-line",e.class&&t.classList.add(e.class),t.textContent=e.text,t.style.animationDelay="0s",n.appendChild(t),l++;const o=l<I.length?I[l].delay-e.delay:500;setTimeout(r,o)}else setTimeout(()=>{n.style.display="none",i&&i.classList.add("active"),y&&y.classList.add("active"),h&&(h.style.display="block")},800)}const a=sessionStorage.getItem("basement-os-booted"),$=new URLSearchParams(window.location.search).get("boot")==="true";!a||$?n&&(n.style.display="block",i&&i.classList.remove("active"),y&&y.classList.remove("active"),h&&(h.style.display="none"),l=0,n.innerHTML="",r(),sessionStorage.setItem("basement-os-booted","true")):(n&&(n.style.display="none"),i&&i.classList.add("active"),y&&y.classList.add("active"),h&&(h.style.display="block"));const V=["high-contrast","synthwave","framer-dark","framer-light","solarized-dark","solarized-light","catppuccin","monokai","gruvbox-dark","gruvbox-light","rose-pine","rose-pine-dawn","rose-pine-moon","cappuccino","basementos"],E=document.getElementById("theme-select");function M(e){V.includes(e)||(e="synthwave"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("basement-os-theme",e),E&&(E.value=e)}const z=localStorage.getItem("basement-os-theme")||"synthwave";M(z),E&&E.addEventListener("change",e=>{M(e.target.value)});function A(){const t=new Date().toLocaleTimeString("en-US",{hour12:!0}),o=document.getElementById("clock");o&&(o.textContent=t)}window.clockInterval&&clearInterval(window.clockInterval),window.clockInterval=setInterval(A,1e3),A();const D=document.getElementById("btn-reboot"),w=document.getElementById("shutdown-screen");D&&w&&D.addEventListener("click",()=>{w.style.display="flex",document.body.style.cursor="wait",setTimeout(()=>{const e=w.querySelector(".shutdown-msg-1"),t=w.querySelector(".shutdown-msg-2");e&&(e.style.display="none"),t&&(t.style.display="block"),setTimeout(()=>{const o=["anim-crt","anim-vhs","anim-phosphor"],b=o[Math.floor(Math.random()*o.length)];if(b==="anim-crt"){const j=window.scrollY,_=window.innerHeight;document.body.scrollHeight;const F=j+_/2;document.body.style.transformOrigin=`50% ${F}px`}document.body.classList.add(b),setTimeout(()=>{sessionStorage.removeItem("basement-os-booted"),window.location.reload()},2500)},2e3)},2e3)});const g=document.getElementById("terminal-toggle"),x=document.getElementById("terminal-demo"),v=document.getElementById("terminal-demo-root"),L=document.getElementById("terminal-disconnect"),p=document.getElementById("disconnect-dots");let m=null,S=null,k=null,f=!1;function U(){return new Promise((e,t)=>{if(window.BasementOSDemo){e();return}const o=document.createElement("script");o.src="/js/basement-os-demo.js",o.onload=()=>e(),o.onerror=()=>t(new Error("Failed to load terminal script")),document.head.appendChild(o)})}async function W(){if(f)return;f=!0,S=localStorage.getItem("basement-os-theme")||"synthwave",document.documentElement.style.transition="all 0.3s ease",document.documentElement.setAttribute("data-theme","basementos");const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ BASEMENT OS SIMULATION ACTIVE ]"),t&&(t.textContent="Terminal code simulates VRChat environment and is direct copy of C# Code modified for Web View. Navigate with ↑ ↓ ← → , Enter to select, Esc to go back."),i&&(i.style.display="none"),x&&(x.style.display="block");try{await U(),v&&window.BasementOSDemo&&(m=new window.BasementOSDemo("terminal-demo-root"),window.basementOSInstance=m,m.init())}catch(o){console.error("Terminal init error:",o)}k=document.querySelector(".nav-btn.active"),document.querySelectorAll(".nav-btn").forEach(o=>o.classList.remove("active")),g&&g.classList.add("active")}function C(){if(f)if(L&&p&&v){v.style.opacity="0.3",L.style.display="flex";let e=0;const t=setInterval(()=>{e++,p&&(p.textContent=".".repeat(e)),e>=3&&(clearInterval(t),setTimeout(()=>{K()},300))},400)}else K()}function K(){m&&m.destroy&&m.destroy(),m=null,window.basementOSInstance=null,f=!1,v&&(v.innerHTML="",v.style.opacity="1"),L&&(L.style.display="none"),p&&(p.textContent=""),S&&document.documentElement.setAttribute("data-theme",S);const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ NEXT-GEN AI DEVLOG ]"),t&&(t.textContent="Content Generated by Developer-Led AI Workflows. Reviewed by a Human-In-the-Loop."),x&&(x.style.display="none"),i&&(i.style.display="block"),g&&g.classList.remove("active"),k&&k.classList.add("active")}g&&g.addEventListener("click",()=>{f?C():W()}),document.querySelectorAll(".nav-btn").forEach(e=>{e.id!=="terminal-toggle"&&e.addEventListener("click",()=>{f&&C()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&f&&m?.currentApp==="SHELL"&&(C(),e.preventDefault())}),document.querySelectorAll(".section-header").forEach(e=>{if(e.classList.contains("typewriter-text"))return;const t=e.textContent||"";e.innerHTML='<span class="typewriter-cursor"></span>',e.classList.add("typewriter-text");let o=0;function b(){o<t.length&&(e.innerHTML=t.substring(0,o+1)+'<span class="typewriter-cursor"></span>',o++,setTimeout(b,50))}setTimeout(b,200)});const u=document.getElementById("lightbox"),d=document.getElementById("lightbox-image"),H=document.getElementById("lightbox-close"),q=document.getElementById("lightbox-prev"),G=document.getElementById("lightbox-next"),N=document.getElementById("lightbox-counter");let c=0,s=[];function Y(e){!u||!d||s.length===0||(c=e,d.src=s[e].src,d.alt=s[e].alt||"Devlog image",u.classList.add("active"),document.body.style.overflow="hidden",O())}function T(){u&&(u.classList.remove("active"),document.body.style.overflow="")}function P(){s.length!==0&&(c=(c-1+s.length)%s.length,d&&(d.src=s[c].src,d.alt=s[c].alt||"Devlog image"),O())}function R(){s.length!==0&&(c=(c+1)%s.length,d&&(d.src=s[c].src,d.alt=s[c].alt||"Devlog image"),O())}function O(){N&&(N.textContent=`${c+1} / ${s.length}`)}s=Array.from(document.querySelectorAll(".devlog-content img, .crt-screen img")),s.forEach((e,t)=>{e.style.cursor="pointer",e.addEventListener("click",o=>{o.preventDefault(),Y(t)})}),H&&H.addEventListener("click",T),q&&q.addEventListener("click",P),G&&G.addEventListener("click",R),u&&u.addEventListener("click",e=>{e.target===u&&T()}),document.addEventListener("keydown",e=>{u?.classList.contains("active")&&(e.key==="Escape"&&T(),e.key==="ArrowLeft"&&P(),e.key==="ArrowRight"&&R())})});document.addEventListener("astro:page-load",function(){const n=document.getElementById("scroll-to-top");if(!n)return;const i=200;window.addEventListener("scroll",function(){window.scrollY>i?n.classList.add("visible"):n.classList.remove("visible")}),n.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});document.addEventListener("astro:page-load",function(){const n=document.getElementById("visit-counter");if(!n)return;function i(l){const r=[{threshold:0,memory:"64K"},{threshold:64,memory:"128K"},{threshold:128,memory:"256K"},{threshold:256,memory:"512K"},{threshold:512,memory:"640K"},{threshold:640,memory:"1MB"},{threshold:1024,memory:"2MB"},{threshold:2048,memory:"4MB"},{threshold:4096,memory:"8MB"},{threshold:8192,memory:"16MB"},{threshold:16384,memory:"32MB"},{threshold:32768,memory:"64MB"},{threshold:65536,memory:"128MB"},{threshold:131072,memory:"256MB"},{threshold:262144,memory:"512MB"},{threshold:524288,memory:"1GB"},{threshold:1048576,memory:"2GB"},{threshold:2097152,memory:"4GB"},{threshold:4194304,memory:"8GB"},{threshold:8388608,memory:"16GB"},{threshold:16777216,memory:"32GB"}];for(let a=r.length-1;a>=0;a--)if(l>=r[a].threshold)return r[a].memory;return"64K"}fetch("https://api.countapi.xyz/hit/basementos/pageviews").then(l=>l.json()).then(l=>{const r=i(l.value);n.textContent=`${r} OK`;const a=document.getElementById("tooltip-current"),B=document.getElementById("tooltip-visits");a&&(a.textContent=r),B&&(B.textContent=l.value.toLocaleString()+" views")}).catch(()=>{n.textContent="640K OK"})});
