import{g as D,s as re,u as de}from"./modeStore.BWM9jLUK.js";const q=[{text:"================================================================================",delay:0},{text:"",delay:50},{text:"BASEMENT OS (Web Terminal)",delay:100,class:"text-secondary"},{text:"(C) 20XX GameFuel",delay:150,class:"text-dim"},{text:"",delay:200},{text:"================================================================================",delay:250},{text:"",delay:300},{text:"POST: Power-On Self Test...",delay:400},{text:"  Checking BIOS.................... OK",delay:600,class:"boot-ok"},{text:"  Memory Test: 640K................ OK",delay:800,class:"boot-ok"},{text:"  Display Adapter.................. OK",delay:1e3,class:"boot-ok"},{text:"",delay:1100},{text:"Loading Devlog...",delay:1300},{text:"  Connecting to GitHub............. OK",delay:1500,class:"boot-ok"},{text:"  Loading blog entries............. OK",delay:1700,class:"boot-ok"},{text:"  Initializing search.............. OK",delay:1900,class:"boot-ok"},{text:"",delay:2e3},{text:"================================================================================",delay:2100},{text:"Boot complete. Welcome to Basement OS.",delay:2300,class:"boot-info"},{text:"================================================================================",delay:2500}];document.addEventListener("astro:page-load",()=>{const s=document.getElementById("boot-screen"),c=document.getElementById("main-content"),y=document.getElementById("nav-menu"),f=document.getElementById("ai-disclosure");let r=0;function I(){setTimeout(()=>{s&&(s.style.display="none"),c&&c.classList.add("active"),y&&y.classList.add("active"),f&&(f.style.display="block")},800)}function S(e){if(!s){I();return}let o="guest";e==="player"?o="player":e==="developer"?o="developer":e==="both"&&(o="admin");const t=[{text:"",delay:200},{text:`[login: ${o}]`,delay:600},{text:"password: *******",delay:1800},{text:"Access Granted.",delay:2600,class:"boot-ok"},{text:"",delay:3e3}];let n=0;function O(){if(n>=t.length){I();return}const x=t[n],L=document.createElement("div");L.className="boot-line",x.class&&L.classList.add(x.class),L.textContent=x.text,s?.appendChild(L),n++;const ae=n<t.length?t[n].delay-x.delay:500;setTimeout(O,ae)}O()}function i(){if(s)if(r<q.length){const e=q[r],o=document.createElement("div");o.className="boot-line",e.class&&o.classList.add(e.class),o.textContent=e.text,o.style.animationDelay="0s",s.appendChild(o),r++;const t=r<q.length?q[r].delay-e.delay:500;setTimeout(i,t)}else sessionStorage.getItem("basement-os-mode-selected")?I():(window.dispatchEvent(new Event("basement-os-request-mode-selection")),window.addEventListener("basement-os-mode-ready",o=>{const n=o.detail?.mode||D();S(n)},{once:!0}))}const a=sessionStorage.getItem("basement-os-booted"),T=new URLSearchParams(window.location.search).get("boot")==="true";!a||T?s&&(s.style.display="block",c&&c.classList.remove("active"),y&&y.classList.remove("active"),f&&(f.style.display="none"),r=0,s.innerHTML="",i(),sessionStorage.setItem("basement-os-booted","true")):(s&&(s.style.display="none"),c&&c.classList.add("active"),y&&y.classList.add("active"),f&&(f.style.display="block"));const $=["high-contrast","synthwave","framer-dark","framer-light","solarized-dark","solarized-light","catppuccin","monokai","gruvbox-dark","gruvbox-light","rose-pine","rose-pine-dawn","rose-pine-moon","cappuccino","basementos"],m=document.getElementById("theme-select");function E(e){$.includes(e)||(e="synthwave"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("basement-os-theme",e),m&&(m.value=e)}const V=localStorage.getItem("basement-os-theme")||"synthwave";E(V),m&&m.addEventListener("change",e=>{E(e.target.value)});const B=document.getElementById("mode-select");function U(e){const o=document.getElementById("terminal-demo");if(o&&o.style.display!=="none")return;const t=document.querySelector(".ai-disclosure-header"),n=document.querySelector(".ai-disclosure-content");!t||!n||(e==="player"?(t.textContent="[ WELCOME TO THE BASEMENT ]",n.textContent="A 2000s basement VRChat world built to explore, chill, and unlock secrets."):(t.textContent="[ NEXT-GEN AI DEVLOG ]",n.textContent="Content Generated by Developer-Led AI Workflows. Reviewed by a Human-In-the-Loop."))}B&&(B.value=D(),B.addEventListener("change",e=>{re(e.target.value)}));const H=D();de(H),U(H);const W=document.getElementById("status-mode");W&&(W.textContent=H.toUpperCase()),window.addEventListener("basement-os-mode-change",e=>{const t=e.detail.mode;B&&(B.value=t),U(t);const n=document.getElementById("status-mode");n&&(n.textContent=t.toUpperCase())});function X(){const o=new Date().toLocaleTimeString("en-US",{hour12:!0}),t=document.getElementById("clock");t&&(t.textContent=o)}window.clockInterval&&clearInterval(window.clockInterval),window.clockInterval=setInterval(X,1e3),X();const Y=document.getElementById("btn-reboot"),k=document.getElementById("shutdown-screen");Y&&k&&Y.addEventListener("click",()=>{k.style.display="flex",document.body.style.cursor="wait",setTimeout(()=>{const e=k.querySelector(".shutdown-msg-1"),o=k.querySelector(".shutdown-msg-2");e&&(e.style.display="none"),o&&(o.style.display="block"),setTimeout(()=>{const t=["anim-crt","anim-vhs","anim-phosphor"],n=t[Math.floor(Math.random()*t.length)];if(n==="anim-crt"){const O=window.scrollY,x=window.innerHeight,L=O+x/2;document.body.style.transformOrigin=`50% ${L}px`}document.body.classList.add(n),setTimeout(()=>{sessionStorage.removeItem("basement-os-booted"),sessionStorage.removeItem("basement-os-mode-selected"),window.location.reload()},2500)},2e3)},2e3)});const w=document.getElementById("terminal-toggle"),M=document.getElementById("terminal-demo"),b=document.getElementById("terminal-demo-root"),A=document.getElementById("terminal-disconnect"),C=document.getElementById("disconnect-dots");let g=null,R=null,G=null,p=!1;function se(){return new Promise((e,o)=>{if(window.BasementOSDemo){e();return}const t=document.createElement("script");t.src="/js/basement-os-demo.js",t.onload=()=>e(),t.onerror=()=>o(new Error("Failed to load terminal script")),document.head.appendChild(t)})}async function ie(){if(p)return;p=!0,R=localStorage.getItem("basement-os-theme")||"synthwave",document.documentElement.style.transition="all 0.3s ease",document.documentElement.setAttribute("data-theme","basementos");const e=document.querySelector(".ai-disclosure-header"),o=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ BASEMENT OS SIMULATION ACTIVE ]"),o&&(o.textContent="Terminal code simulates VRChat environment. Navigate with arrow keys, Enter to select, Esc to go back."),c&&(c.style.display="none"),M&&(M.style.display="block");try{await se(),b&&window.BasementOSDemo&&(g=new window.BasementOSDemo("terminal-demo-root"),window.basementOSInstance=g,g.init())}catch(t){console.error("Terminal init error:",t)}window.dispatchEvent(new Event("basement-os-terminal-opened")),G=document.querySelector(".nav-btn.active"),document.querySelectorAll(".nav-btn").forEach(t=>t.classList.remove("active")),w&&w.classList.add("active")}function K(){if(p)if(A&&C&&b){b.style.opacity="0.3",A.style.display="flex";let e=0;const o=setInterval(()=>{e++,C&&(C.textContent=".".repeat(e)),e>=3&&(clearInterval(o),setTimeout(()=>{j()},300))},400)}else j()}function j(){window.dispatchEvent(new Event("basement-os-terminal-closing")),g&&g.destroy&&g.destroy(),g=null,window.basementOSInstance=null,p=!1,b&&(b.innerHTML="",b.style.opacity="1"),A&&(A.style.display="none"),C&&(C.textContent=""),R&&document.documentElement.setAttribute("data-theme",R);const e=D(),o=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");o&&t&&(e==="player"?(o.textContent="[ WELCOME TO THE BASEMENT ]",t.textContent="A 2000s basement VRChat world built to explore, chill, and unlock secrets."):(o.textContent="[ NEXT-GEN AI DEVLOG ]",t.textContent="Content Generated by Developer-Led AI Workflows. Reviewed by a Human-In-the-Loop.")),M&&(M.style.display="none"),c&&(c.style.display="block"),w&&w.classList.remove("active"),G&&G.classList.add("active")}w&&w.addEventListener("click",()=>{p?K():ie()}),document.querySelectorAll(".nav-btn").forEach(e=>{e.id!=="terminal-toggle"&&e.addEventListener("click",()=>{p&&K()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&p&&g?.currentApp==="SHELL"&&(K(),e.preventDefault())});const z=document.getElementById("crt-mode-switcher")?.querySelectorAll(".crt-mode-btn");function F(){return localStorage.getItem("basement-os-crt")||"css"}function le(e){localStorage.setItem("basement-os-crt",e)}function _(e){z?.forEach(o=>{const t=o;t.dataset.crtMode===e?t.classList.add("active"):t.classList.remove("active")})}function Q(e){const o=document.getElementById("terminal-demo");o&&(o.classList.remove("crt-active"),e==="css"&&o.classList.add("crt-active"),le(e),_(e))}z?.forEach(e=>{e.addEventListener("click",o=>{const t=o.currentTarget.dataset.crtMode||"off";Q(t)})}),_(F()),window.addEventListener("basement-os-terminal-opened",()=>{const e=F();e!=="off"&&Q(e)}),window.addEventListener("basement-os-terminal-closing",()=>{const e=document.getElementById("terminal-demo");e&&e.classList.remove("crt-active")}),document.querySelectorAll(".section-header").forEach(e=>{if(e.classList.contains("typewriter-text"))return;const o=e.textContent||"";e.innerHTML='<span class="typewriter-cursor"></span>',e.classList.add("typewriter-text");let t=0;function n(){t<o.length&&(e.innerHTML=o.substring(0,t+1)+'<span class="typewriter-cursor"></span>',t++,setTimeout(n,50))}setTimeout(n,200)});const v=document.getElementById("lightbox"),u=document.getElementById("lightbox-image"),J=document.getElementById("lightbox-close"),Z=document.getElementById("lightbox-prev"),ee=document.getElementById("lightbox-next"),te=document.getElementById("lightbox-counter");let d=0,l=[];function ce(e){!v||!u||l.length===0||(d=e,u.src=l[e].src,u.alt=l[e].alt||"Devlog image",v.classList.add("active"),document.body.style.overflow="hidden",P())}function N(){v&&(v.classList.remove("active"),document.body.style.overflow="")}function oe(){l.length!==0&&(d=(d-1+l.length)%l.length,u&&(u.src=l[d].src,u.alt=l[d].alt||"Devlog image"),P())}function ne(){l.length!==0&&(d=(d+1)%l.length,u&&(u.src=l[d].src,u.alt=l[d].alt||"Devlog image"),P())}function P(){te&&(te.textContent=`${d+1} / ${l.length}`)}l=Array.from(document.querySelectorAll(".devlog-content img, .crt-screen img")),l.forEach((e,o)=>{e.style.cursor="pointer",e.addEventListener("click",t=>{t.preventDefault(),ce(o)})}),J&&J.addEventListener("click",N),Z&&Z.addEventListener("click",oe),ee&&ee.addEventListener("click",ne),v&&v.addEventListener("click",e=>{e.target===v&&N()}),document.addEventListener("keydown",e=>{v?.classList.contains("active")&&(e.key==="Escape"&&N(),e.key==="ArrowLeft"&&oe(),e.key==="ArrowRight"&&ne())})});document.addEventListener("astro:page-load",function(){const s=document.getElementById("scroll-to-top");if(!s)return;const c=200;window.addEventListener("scroll",function(){window.scrollY>c?s.classList.add("visible"):s.classList.remove("visible")}),s.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});document.addEventListener("astro:page-load",function(){const s=document.getElementById("visit-counter");if(!s)return;function c(i){const a=[{threshold:0,memory:"64K"},{threshold:64,memory:"128K"},{threshold:128,memory:"256K"},{threshold:256,memory:"512K"},{threshold:512,memory:"640K"},{threshold:640,memory:"1MB"},{threshold:1024,memory:"2MB"},{threshold:2048,memory:"4MB"},{threshold:4096,memory:"8MB"},{threshold:8192,memory:"16MB"},{threshold:16384,memory:"32MB"},{threshold:32768,memory:"64MB"},{threshold:65536,memory:"128MB"},{threshold:131072,memory:"256MB"},{threshold:262144,memory:"512MB"},{threshold:524288,memory:"1GB"},{threshold:1048576,memory:"2GB"},{threshold:2097152,memory:"4GB"},{threshold:4194304,memory:"8GB"},{threshold:8388608,memory:"16GB"},{threshold:16777216,memory:"32GB"}];for(let h=a.length-1;h>=0;h--)if(i>=a[h].threshold)return a[h].memory;return"64K"}const y="basementos",f="views",r="basement-os-pageviews",I=window.location.hostname==="basementos.com";function S(i){const a=c(i);s.textContent=`${a} OK`;const h=document.getElementById("tooltip-current"),T=document.getElementById("tooltip-visits");h&&(h.textContent=a),T&&(T.textContent=i.toLocaleString()+" views"),document.querySelectorAll(".mem-tooltip-row[data-tier]").forEach(m=>{const E=m.querySelector(".tier-arrow");m.dataset.tier===a?(m.classList.add("active-tier"),E&&(E.textContent=">")):(m.classList.remove("active-tier"),E&&(E.textContent=""))})}if(!I){const i=localStorage.getItem(r);i&&S(parseInt(i,10));return}fetch(`https://api.counterapi.dev/v1/${y}/${f}/up`).then(i=>{if(!i.ok)throw new Error(`HTTP ${i.status}`);return i.json()}).then(i=>{const a=i.count||0;localStorage.setItem(r,String(a)),S(a)}).catch(()=>{const i=localStorage.getItem(r);i&&S(parseInt(i,10))})});
