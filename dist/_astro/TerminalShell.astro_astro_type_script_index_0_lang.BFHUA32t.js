import{g as N,s as ne,u as se}from"./modeStore.BiqmjXbi.js";const A=[{text:"================================================================================",delay:0},{text:"",delay:50},{text:"BASEMENT OS (Web Terminal)",delay:100,class:"text-secondary"},{text:"(C) 2025 CloudStrife7",delay:150,class:"text-dim"},{text:"",delay:200},{text:"================================================================================",delay:250},{text:"",delay:300},{text:"POST: Power-On Self Test...",delay:400},{text:"  Checking BIOS.................... OK",delay:600,class:"boot-ok"},{text:"  Memory Test: 640K................ OK",delay:800,class:"boot-ok"},{text:"  Display Adapter.................. OK",delay:1e3,class:"boot-ok"},{text:"",delay:1100},{text:"Loading Devlog...",delay:1300},{text:"  Connecting to GitHub............. OK",delay:1500,class:"boot-ok"},{text:"  Loading blog entries............. OK",delay:1700,class:"boot-ok"},{text:"  Initializing search.............. OK",delay:1900,class:"boot-ok"},{text:"",delay:2e3},{text:"================================================================================",delay:2100},{text:"Boot complete. Welcome to Basement OS.",delay:2300,class:"boot-info"},{text:"================================================================================",delay:2500}];document.addEventListener("astro:page-load",()=>{const n=document.getElementById("boot-screen"),l=document.getElementById("main-content"),f=document.getElementById("nav-menu"),h=document.getElementById("ai-disclosure");let a=0;function c(){setTimeout(()=>{n&&(n.style.display="none"),l&&l.classList.add("active"),f&&f.classList.add("active"),h&&(h.style.display="block")},800)}function r(e){if(!n){c();return}let t="guest";e==="player"?t="player":e==="developer"?t="developer":e==="both"&&(t="admin");const o=[{text:"",delay:200},{text:`[login: ${t}]`,delay:600},{text:"password: *******",delay:1800},{text:"Access Granted.",delay:2600,class:"boot-ok"},{text:"",delay:3e3}];let s=0;function O(){if(s>=o.length){c();return}const w=o[s],x=document.createElement("div");x.className="boot-line",w.class&&x.classList.add(w.class),x.textContent=w.text,n?.appendChild(x),s++;const oe=s<o.length?o[s].delay-w.delay:500;setTimeout(O,oe)}O()}function L(){if(n)if(a<A.length){const e=A[a],t=document.createElement("div");t.className="boot-line",e.class&&t.classList.add(e.class),t.textContent=e.text,t.style.animationDelay="0s",n.appendChild(t),a++;const o=a<A.length?A[a].delay-e.delay:500;setTimeout(L,o)}else sessionStorage.getItem("basement-os-mode-selected")?c():(window.dispatchEvent(new Event("basement-os-request-mode-selection")),window.addEventListener("basement-os-mode-ready",t=>{const s=t.detail?.mode||N();r(s)},{once:!0}))}const k=sessionStorage.getItem("basement-os-booted"),v=new URLSearchParams(window.location.search).get("boot")==="true";!k||v?n&&(n.style.display="block",l&&l.classList.remove("active"),f&&f.classList.remove("active"),h&&(h.style.display="none"),a=0,n.innerHTML="",L(),sessionStorage.setItem("basement-os-booted","true")):(n&&(n.style.display="none"),l&&l.classList.add("active"),f&&f.classList.add("active"),h&&(h.style.display="block"));const p=["high-contrast","synthwave","framer-dark","framer-light","solarized-dark","solarized-light","catppuccin","monokai","gruvbox-dark","gruvbox-light","rose-pine","rose-pine-dawn","rose-pine-moon","cappuccino","basementos"],I=document.getElementById("theme-select");function R(e){p.includes(e)||(e="synthwave"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("basement-os-theme",e),I&&(I.value=e)}const J=localStorage.getItem("basement-os-theme")||"synthwave";R(J),I&&I.addEventListener("change",e=>{R(e.target.value)});const B=document.getElementById("mode-select");B&&(B.value=N(),B.addEventListener("change",e=>{ne(e.target.value)}));const P=N();se(P);const $=document.getElementById("status-mode");$&&($.textContent=P.toUpperCase()),window.addEventListener("basement-os-mode-change",e=>{const o=e.detail.mode;B&&(B.value=o);const s=document.getElementById("status-mode");s&&(s.textContent=o.toUpperCase())});function U(){const t=new Date().toLocaleTimeString("en-US",{hour12:!0}),o=document.getElementById("clock");o&&(o.textContent=t)}window.clockInterval&&clearInterval(window.clockInterval),window.clockInterval=setInterval(U,1e3),U();const V=document.getElementById("btn-reboot"),C=document.getElementById("shutdown-screen");V&&C&&V.addEventListener("click",()=>{C.style.display="flex",document.body.style.cursor="wait",setTimeout(()=>{const e=C.querySelector(".shutdown-msg-1"),t=C.querySelector(".shutdown-msg-2");e&&(e.style.display="none"),t&&(t.style.display="block"),setTimeout(()=>{const o=["anim-crt","anim-vhs","anim-phosphor"],s=o[Math.floor(Math.random()*o.length)];if(s==="anim-crt"){const O=window.scrollY,w=window.innerHeight,x=O+w/2;document.body.style.transformOrigin=`50% ${x}px`}document.body.classList.add(s),setTimeout(()=>{sessionStorage.removeItem("basement-os-booted"),sessionStorage.removeItem("basement-os-mode-selected"),window.location.reload()},2500)},2e3)},2e3)});const E=document.getElementById("terminal-toggle"),T=document.getElementById("terminal-demo"),b=document.getElementById("terminal-demo-root"),M=document.getElementById("terminal-disconnect"),S=document.getElementById("disconnect-dots");let u=null,D=null,q=null,g=!1;function Z(){return new Promise((e,t)=>{if(window.BasementOSDemo){e();return}const o=document.createElement("script");o.src="/js/basement-os-demo.js",o.onload=()=>e(),o.onerror=()=>t(new Error("Failed to load terminal script")),document.head.appendChild(o)})}async function ee(){if(g)return;g=!0,D=localStorage.getItem("basement-os-theme")||"synthwave",document.documentElement.style.transition="all 0.3s ease",document.documentElement.setAttribute("data-theme","basementos");const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ BASEMENT OS SIMULATION ACTIVE ]"),t&&(t.textContent="Terminal code simulates VRChat environment. Navigate with arrow keys, Enter to select, Esc to go back."),l&&(l.style.display="none"),T&&(T.style.display="block");try{await Z(),b&&window.BasementOSDemo&&(u=new window.BasementOSDemo("terminal-demo-root"),window.basementOSInstance=u,u.init())}catch(o){console.error("Terminal init error:",o)}q=document.querySelector(".nav-btn.active"),document.querySelectorAll(".nav-btn").forEach(o=>o.classList.remove("active")),E&&E.classList.add("active")}function K(){if(g)if(M&&S&&b){b.style.opacity="0.3",M.style.display="flex";let e=0;const t=setInterval(()=>{e++,S&&(S.textContent=".".repeat(e)),e>=3&&(clearInterval(t),setTimeout(()=>{Y()},300))},400)}else Y()}function Y(){u&&u.destroy&&u.destroy(),u=null,window.basementOSInstance=null,g=!1,b&&(b.innerHTML="",b.style.opacity="1"),M&&(M.style.display="none"),S&&(S.textContent=""),D&&document.documentElement.setAttribute("data-theme",D);const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ NEXT-GEN AI DEVLOG ]"),t&&(t.textContent="Content Generated by Developer-Led AI Workflows. Reviewed by a Human-In-the-Loop."),T&&(T.style.display="none"),l&&(l.style.display="block"),E&&E.classList.remove("active"),q&&q.classList.add("active")}E&&E.addEventListener("click",()=>{g?K():ee()}),document.querySelectorAll(".nav-btn").forEach(e=>{e.id!=="terminal-toggle"&&e.addEventListener("click",()=>{g&&K()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&g&&u?.currentApp==="SHELL"&&(K(),e.preventDefault())}),document.querySelectorAll(".section-header").forEach(e=>{if(e.classList.contains("typewriter-text"))return;const t=e.textContent||"";e.innerHTML='<span class="typewriter-cursor"></span>',e.classList.add("typewriter-text");let o=0;function s(){o<t.length&&(e.innerHTML=t.substring(0,o+1)+'<span class="typewriter-cursor"></span>',o++,setTimeout(s,50))}setTimeout(s,200)});const y=document.getElementById("lightbox"),m=document.getElementById("lightbox-image"),j=document.getElementById("lightbox-close"),z=document.getElementById("lightbox-prev"),W=document.getElementById("lightbox-next"),_=document.getElementById("lightbox-counter");let d=0,i=[];function te(e){!y||!m||i.length===0||(d=e,m.src=i[e].src,m.alt=i[e].alt||"Devlog image",y.classList.add("active"),document.body.style.overflow="hidden",G())}function H(){y&&(y.classList.remove("active"),document.body.style.overflow="")}function F(){i.length!==0&&(d=(d-1+i.length)%i.length,m&&(m.src=i[d].src,m.alt=i[d].alt||"Devlog image"),G())}function Q(){i.length!==0&&(d=(d+1)%i.length,m&&(m.src=i[d].src,m.alt=i[d].alt||"Devlog image"),G())}function G(){_&&(_.textContent=`${d+1} / ${i.length}`)}i=Array.from(document.querySelectorAll(".devlog-content img, .crt-screen img")),i.forEach((e,t)=>{e.style.cursor="pointer",e.addEventListener("click",o=>{o.preventDefault(),te(t)})}),j&&j.addEventListener("click",H),z&&z.addEventListener("click",F),W&&W.addEventListener("click",Q),y&&y.addEventListener("click",e=>{e.target===y&&H()}),document.addEventListener("keydown",e=>{y?.classList.contains("active")&&(e.key==="Escape"&&H(),e.key==="ArrowLeft"&&F(),e.key==="ArrowRight"&&Q())})});document.addEventListener("astro:page-load",function(){const n=document.getElementById("scroll-to-top");if(!n)return;const l=200;window.addEventListener("scroll",function(){window.scrollY>l?n.classList.add("visible"):n.classList.remove("visible")}),n.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});document.addEventListener("astro:page-load",function(){const n=document.getElementById("visit-counter");if(!n)return;function l(a){const c=[{threshold:0,memory:"64K"},{threshold:64,memory:"128K"},{threshold:128,memory:"256K"},{threshold:256,memory:"512K"},{threshold:512,memory:"640K"},{threshold:640,memory:"1MB"},{threshold:1024,memory:"2MB"},{threshold:2048,memory:"4MB"},{threshold:4096,memory:"8MB"},{threshold:8192,memory:"16MB"},{threshold:16384,memory:"32MB"},{threshold:32768,memory:"64MB"},{threshold:65536,memory:"128MB"},{threshold:131072,memory:"256MB"},{threshold:262144,memory:"512MB"},{threshold:524288,memory:"1GB"},{threshold:1048576,memory:"2GB"},{threshold:2097152,memory:"4GB"},{threshold:4194304,memory:"8GB"},{threshold:8388608,memory:"16GB"},{threshold:16777216,memory:"32GB"}];for(let r=c.length-1;r>=0;r--)if(a>=c[r].threshold)return c[r].memory;return"64K"}fetch("https://api.counterapi.dev/v1/basementos/pageviews/up").then(a=>a.json()).then(a=>{const c=a.count||0,r=l(c);n.textContent=`${r} OK`;const L=document.getElementById("tooltip-current"),k=document.getElementById("tooltip-visits");L&&(L.textContent=r),k&&(k.textContent=c.toLocaleString()+" views"),document.querySelectorAll(".mem-tooltip-row[data-tier]").forEach(v=>{const p=v.querySelector(".tier-arrow");v.dataset.tier===r?(v.classList.add("active-tier"),p&&(p.textContent=">")):(v.classList.remove("active-tier"),p&&(p.textContent=""))})}).catch(()=>{n.textContent="64K OK"})});
