const x=[{text:"════════════════════════════════════════════════════════════════════════════════",delay:0},{text:"",delay:50},{text:"BASEMENT OS (Web Terminal)",delay:100,class:"text-secondary"},{text:"(C) 2025 CloudStrife7",delay:150,class:"text-dim"},{text:"",delay:200},{text:"════════════════════════════════════════════════════════════════════════════════",delay:250},{text:"",delay:300},{text:"POST: Power-On Self Test...",delay:400},{text:"  Checking BIOS.................... OK",delay:600,class:"boot-ok"},{text:"  Memory Test: 640K................ OK",delay:800,class:"boot-ok"},{text:"  Display Adapter.................. OK",delay:1e3,class:"boot-ok"},{text:"",delay:1100},{text:"Loading Devlog...",delay:1300},{text:"  Connecting to GitHub............. OK",delay:1500,class:"boot-ok"},{text:"  Loading blog entries............. OK",delay:1700,class:"boot-ok"},{text:"  Initializing search.............. OK",delay:1900,class:"boot-ok"},{text:"",delay:2e3},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2100},{text:"Boot complete. Welcome to Basement OS.",delay:2300,class:"boot-info"},{text:"════════════════════════════════════════════════════════════════════════════════",delay:2500}];document.addEventListener("astro:page-load",()=>{const s=document.getElementById("boot-screen"),i=document.getElementById("main-content"),m=document.getElementById("nav-menu"),u=document.getElementById("ai-disclosure");let y=0;function B(){if(s)if(y<x.length){const e=x[y],t=document.createElement("div");t.className="boot-line",e.class&&t.classList.add(e.class),t.textContent=e.text,t.style.animationDelay="0s",s.appendChild(t),y++;const n=y<x.length?x[y].delay-e.delay:500;setTimeout(B,n)}else setTimeout(()=>{s.style.display="none",i&&i.classList.add("active"),m&&m.classList.add("active"),u&&(u.style.display="block")},800)}const R=sessionStorage.getItem("basement-os-booted"),G=new URLSearchParams(window.location.search).get("boot")==="true";!R||G?s&&(s.style.display="block",i&&i.classList.remove("active"),m&&m.classList.remove("active"),u&&(u.style.display="none"),y=0,s.innerHTML="",B(),sessionStorage.setItem("basement-os-booted","true")):(s&&(s.style.display="none"),i&&i.classList.add("active"),m&&m.classList.add("active"),u&&(u.style.display="block"));const U=["high-contrast","synthwave","framer-dark","framer-light","solarized-dark","solarized-light","catppuccin","monokai","gruvbox-dark","gruvbox-light","rose-pine","rose-pine-dawn","rose-pine-moon","cappuccino","basementos"],b=document.getElementById("theme-select");function C(e){U.includes(e)||(e="synthwave"),document.documentElement.setAttribute("data-theme",e),localStorage.setItem("basement-os-theme",e),b&&(b.value=e)}const V=localStorage.getItem("basement-os-theme")||"synthwave";C(V),b&&b.addEventListener("change",e=>{C(e.target.value)});function O(){const t=new Date().toLocaleTimeString("en-US",{hour12:!0}),n=document.getElementById("clock");n&&(n.textContent=t)}window.clockInterval&&clearInterval(window.clockInterval),window.clockInterval=setInterval(O,1e3),O();const A=document.getElementById("btn-reboot"),p=document.getElementById("shutdown-screen");A&&p&&A.addEventListener("click",()=>{p.style.display="flex",document.body.style.cursor="wait",setTimeout(()=>{const e=p.querySelector(".shutdown-msg-1"),t=p.querySelector(".shutdown-msg-2");e&&(e.style.display="none"),t&&(t.style.display="block"),setTimeout(()=>{const n=["anim-crt","anim-vhs","anim-phosphor"],h=n[Math.floor(Math.random()*n.length)];if(h==="anim-crt"){const $=window.scrollY,j=window.innerHeight;document.body.scrollHeight;const _=$+j/2;document.body.style.transformOrigin=`50% ${_}px`}document.body.classList.add(h),setTimeout(()=>{sessionStorage.removeItem("basement-os-booted"),window.location.reload()},2500)},2e3)},2e3)});const f=document.getElementById("terminal-toggle"),w=document.getElementById("terminal-demo"),g=document.getElementById("terminal-demo-root"),E=document.getElementById("terminal-disconnect"),v=document.getElementById("disconnect-dots");let a=null,L=null,I=null,d=!1;function W(){return new Promise((e,t)=>{if(window.BasementOSDemo){e();return}const n=document.createElement("script");n.src="/js/basement-os-demo.js",n.onload=()=>e(),n.onerror=()=>t(new Error("Failed to load terminal script")),document.head.appendChild(n)})}async function Y(){if(d)return;d=!0,L=localStorage.getItem("basement-os-theme")||"synthwave",document.documentElement.style.transition="all 0.3s ease",document.documentElement.setAttribute("data-theme","basementos");const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ BASEMENT OS SIMULATION ACTIVE ]"),t&&(t.textContent="Terminal code simulates VRChat environment and is direct copy of C# Code modified for Web View. Navigate with ↑ ↓ ← → , Enter to select, Esc to go back."),i&&(i.style.display="none"),w&&(w.style.display="block");try{await W(),g&&window.BasementOSDemo&&(a=new window.BasementOSDemo("terminal-demo-root"),window.basementOSInstance=a,a.init())}catch(n){console.error("Terminal init error:",n)}I=document.querySelector(".nav-btn.active"),document.querySelectorAll(".nav-btn").forEach(n=>n.classList.remove("active")),f&&f.classList.add("active")}function S(){if(d)if(E&&v&&g){g.style.opacity="0.3",E.style.display="flex";let e=0;const t=setInterval(()=>{e++,v&&(v.textContent=".".repeat(e)),e>=3&&(clearInterval(t),setTimeout(()=>{D()},300))},400)}else D()}function D(){a&&a.destroy&&a.destroy(),a=null,window.basementOSInstance=null,d=!1,g&&(g.innerHTML="",g.style.opacity="1"),E&&(E.style.display="none"),v&&(v.textContent=""),L&&document.documentElement.setAttribute("data-theme",L);const e=document.querySelector(".ai-disclosure-header"),t=document.querySelector(".ai-disclosure-content");e&&(e.textContent="[ NEXT-GEN AI DEVLOG ]"),t&&(t.textContent="Content Generated by Developer-Led AI Workflows. Reviewed by a Human-In-the-Loop."),w&&(w.style.display="none"),i&&(i.style.display="block"),f&&f.classList.remove("active"),I&&I.classList.add("active")}f&&f.addEventListener("click",()=>{d?S():Y()}),document.querySelectorAll(".nav-btn").forEach(e=>{e.id!=="terminal-toggle"&&e.addEventListener("click",()=>{d&&S()})}),document.addEventListener("keydown",e=>{e.key==="Escape"&&d&&a?.currentApp==="SHELL"&&(S(),e.preventDefault())}),document.querySelectorAll(".section-header").forEach(e=>{if(e.classList.contains("typewriter-text"))return;const t=e.textContent||"";e.innerHTML='<span class="typewriter-cursor"></span>',e.classList.add("typewriter-text");let n=0;function h(){n<t.length&&(e.innerHTML=t.substring(0,n+1)+'<span class="typewriter-cursor"></span>',n++,setTimeout(h,50))}setTimeout(h,200)});const r=document.getElementById("lightbox"),c=document.getElementById("lightbox-image"),H=document.getElementById("lightbox-close"),q=document.getElementById("lightbox-prev"),M=document.getElementById("lightbox-next"),N=document.getElementById("lightbox-counter");let l=0,o=[];function z(e){!r||!c||o.length===0||(l=e,c.src=o[e].src,c.alt=o[e].alt||"Devlog image",r.classList.add("active"),document.body.style.overflow="hidden",T())}function k(){r&&(r.classList.remove("active"),document.body.style.overflow="")}function P(){o.length!==0&&(l=(l-1+o.length)%o.length,c&&(c.src=o[l].src,c.alt=o[l].alt||"Devlog image"),T())}function K(){o.length!==0&&(l=(l+1)%o.length,c&&(c.src=o[l].src,c.alt=o[l].alt||"Devlog image"),T())}function T(){N&&(N.textContent=`${l+1} / ${o.length}`)}o=Array.from(document.querySelectorAll(".devlog-content img, .crt-screen img")),o.forEach((e,t)=>{e.style.cursor="pointer",e.addEventListener("click",n=>{n.preventDefault(),z(t)})}),H&&H.addEventListener("click",k),q&&q.addEventListener("click",P),M&&M.addEventListener("click",K),r&&r.addEventListener("click",e=>{e.target===r&&k()}),document.addEventListener("keydown",e=>{r?.classList.contains("active")&&(e.key==="Escape"&&k(),e.key==="ArrowLeft"&&P(),e.key==="ArrowRight"&&K())})});document.addEventListener("astro:page-load",function(){const s=document.getElementById("scroll-to-top");if(!s)return;const i=200;window.addEventListener("scroll",function(){window.scrollY>i?s.classList.add("visible"):s.classList.remove("visible")}),s.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})});
