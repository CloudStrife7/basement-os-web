```astro
---
import '../styles/global.css';
import '../styles/shutdown.css';
import { ClientRouter } from 'astro:transitions';
import SEO from '../components/SEO.astro';

interface Props {
	title: string;
	description?: string;
    image?: string;
    article?: boolean;
    audience?: 'player' | 'dev';
    noIndex?: boolean;
}

const { title, description, image, article, audience, noIndex } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" data-theme="synthwave">
	<head>
        <SEO 
            title={title} 
            description={description} 
            image={image} 
            article={article} 
            audience={audience} 
            noIndex={noIndex} 
        />
		<ClientRouter />
        <script is:inline>
            // Disable browser's scroll restoration to prevent progress bar on scroll
            // Astro's ClientRouter calls history.replaceState during scroll which
            // triggers native mobile browser progress indicators
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
        </script>
        <!-- Script temporarily removed for debugging -->
	</head>
	<body>
		<slot />
	</body>
</html>  <script type="module">document.addEventListener("astro:page-load",function(){const h="wrld_7302897c-be0f-4037-ac67-76f0ea065c2b",y="JlE5Jldo5Jibnk5O5hTx6XVqsJyIkZVd",c="vrchat-world-stats",i={visits:937,favorites:68,popularity:4,updated_at:"2025-12-28T00:00:00.000Z",created_at:"2024-07-22T00:00:00.000Z",timestamp:Date.now()},a=`https://api.vrchat.cloud/api/1/worlds/${h}?apiKey=${y}`,g=[`https://corsproxy.io/?${encodeURIComponent(a)}`,`https://api.allorigins.win/get?url=${encodeURIComponent(a)}`,`https://cors-anywhere.herokuapp.com/${a}`];function v(){try{const t=localStorage.getItem(c);if(t){const e=JSON.parse(t);if(Date.now()-e.timestamp<6e5)return e}}catch(t){console.log("Cache read failed:",t)}return null}function r(t){try{localStorage.setItem(c,JSON.stringify({...t,timestamp:Date.now()}))}catch(e){console.log("Cache write failed:",e)}}async function C(t){for(let e=0;e<t.length;e++)try{const o=await fetch(t[e],{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)continue;const n=await o.json();return n.contents?JSON.parse(n.contents):n}catch(o){console.log(`Proxy ${e+1} failed:`,o);continue}throw new Error("All proxies failed")}function d(t){try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"--"}}function l(t){const e=o=>new Intl.NumberFormat().format(o);if(t){const o=document.getElementById("stat-visits-top"),n=document.getElementById("stat-favorites-top");o&&t.visits&&(o.textContent=e(t.visits)),n&&t.favorites&&(n.textContent=e(t.favorites))}}function f(t){const e=E=>new Intl.NumberFormat().format(E),o=document.getElementById("stat-visits"),n=document.getElementById("stat-favorites"),s=document.getElementById("stat-popularity"),m=document.getElementById("stat-updated"),p=document.getElementById("stat-created");o&&(o.textContent=e(t.visits)),n&&(n.textContent=e(t.favorites||0)),s&&(s.textContent=e(t.popularity||0)),m&&(m.textContent=d(t.updated_at)),p&&(p.textContent=d(t.created_at))}const u=v();C(g).then(t=>{l(t),f(t),r(t)}).catch(t=>{console.log("All fetch attempts failed, using cached or default stats");const e=u||i;l(e),f(e),u||r(i)})});</script>