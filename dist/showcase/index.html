```astro
---
import '../styles/global.css';
import '../styles/shutdown.css';
import { ClientRouter } from 'astro:transitions';
import SEO from '../components/SEO.astro';

interface Props {
	title: string;
	description?: string;
    image?: string;
    article?: boolean;
    audience?: 'player' | 'dev';
    noIndex?: boolean;
}

const { title, description, image, article, audience, noIndex } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" data-theme="synthwave">
	<head>
        <SEO 
            title={title} 
            description={description} 
            image={image} 
            article={article} 
            audience={audience} 
            noIndex={noIndex} 
        />
		<ClientRouter />
        <script is:inline>
            // Disable browser's scroll restoration to prevent progress bar on scroll
            // Astro's ClientRouter calls history.replaceState during scroll which
            // triggers native mobile browser progress indicators
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
        </script>
        <!-- Script temporarily removed for debugging -->
	</head>
	<body>
		<slot />
	</body>
</html>  <script type="module">function E(i,d,l=1500){const u=performance.now(),c=r=>new Intl.NumberFormat().format(Math.floor(r));function m(r){const f=r-u,p=Math.min(f/l,1),h=1-Math.pow(1-p,3),g=0+(d-0)*h;i.textContent=c(g),p<1?requestAnimationFrame(m):i.textContent=c(d)}requestAnimationFrame(m)}document.addEventListener("astro:page-load",function(){const i="wrld_7302897c-be0f-4037-ac67-76f0ea065c2b",d="JlE5Jldo5Jibnk5O5hTx6XVqsJyIkZVd",l="vrchat-world-stats",u={visits:936,favorites:68,popularity:42,updated_at:"2025-12-28T00:00:00.000Z",created_at:"2024-07-08T00:00:00.000Z",timestamp:Date.now()},c=`https://api.vrchat.cloud/api/1/worlds/${i}?apiKey=${d}`,m=[`https://corsproxy.io/?${encodeURIComponent(c)}`,`https://api.allorigins.win/get?url=${encodeURIComponent(c)}`,`https://cors-anywhere.herokuapp.com/${c}`];function r(){try{const t=localStorage.getItem(l);if(t){const e=JSON.parse(t);if(Date.now()-e.timestamp<6e5)return e}}catch(t){console.log("Cache read failed:",t)}return null}function f(t){try{localStorage.setItem(l,JSON.stringify({...t,timestamp:Date.now()}))}catch(e){console.log("Cache write failed:",e)}}async function p(t){for(let e=0;e<t.length;e++)try{const o=await fetch(t[e],{method:"GET",headers:{Accept:"application/json"}});if(!o.ok)continue;const s=await o.json();return s.contents?JSON.parse(s.contents):s}catch(o){console.log(`Proxy ${e+1} failed:`,o);continue}throw new Error("All proxies failed")}function h(t){try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"--"}}function g(t){document.querySelectorAll(".stat-block-compact .stat-number-compact").forEach((o,s)=>{const a=o;let n=parseInt(a.dataset.target||"0",10);t&&(a.id==="stat-visits"&&(n=t.visits||n,a.dataset.target=n.toString()),a.id==="stat-favorites"&&(n=t.favorites||n,a.dataset.target=n.toString())),setTimeout(()=>{E(a,n,1500)},s*100)})}function y(t){const e=S=>new Intl.NumberFormat().format(S),o=document.getElementById("stat-visits-2"),s=document.getElementById("stat-favorites-2"),a=document.getElementById("stat-popularity"),n=document.getElementById("stat-updated"),I=document.getElementById("stat-created");o&&(o.textContent=e(t.visits)),s&&(s.textContent=e(t.favorites||0)),a&&(a.textContent=e(t.popularity||0)),n&&(n.textContent=h(t.updated_at)),I&&(I.textContent=h(t.created_at))}const C=r();p(m).then(t=>{g(t),y(t),f(t)}).catch(t=>{console.log("All fetch attempts failed, using cached or default stats");const e=C||u;g(e),y(e),C||f(u)})});</script>