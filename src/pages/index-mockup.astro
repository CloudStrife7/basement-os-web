---
import BaseLayout from '../layouts/BaseLayout.astro';
import TerminalShell from '../components/TerminalShell.astro';
---

<BaseLayout title="BASEMENT OS | Intro">
  <TerminalShell activeSection="intro">
    <div class="content-section active">
      <h2 class="section-header">C:\BASEMENT\INTRO.TXT</h2>

      <div class="mission-statement">
        <h3>Lower Level 2.0 ‚Äî A VRChat Basement Reimagined Through AI-Assisted Development</h3>
        <p>Lower Level 2.0 is my ongoing experiment in applying AI-assisted workflows to real VRChat world development. What began as a nostalgic 2000s-inspired basement scene has evolved into a fully interactive environment powered by systems-level thinking, continuous iteration, and AI-enhanced tooling.</p>
      </div>

      <div class="info-card" style="margin-bottom: 20px;">
        <p><strong>// SYSTEM NOTE:</strong></p>
        <p>To be clear‚ÄîI didn't use AI to build the walls or the 3D furniture; I commissioned the 3D model base providing detailed plans to recreate the basement I hung out in in college.</p>
        <p>I worked with AI to install a sort of smart home system, and make the basement 'alive'. The physical 3D space was a commissioned asset was a great canvas. What I built in with AI was the logic‚Äîthe interactive terminal, the networking, and the systems that actually create a living, breathing place.</p>
      </div>

      <div class="crt-screen">
        <a href="https://i.imgur.com/N8da6pU.jpeg" target="_blank">
            <img src="https://i.imgur.com/N8da6pU.jpeg" alt="Lower Level 2.0 VRChat Basement World" loading="lazy" style="width: 100%; display: block;">
        </a>
      </div>

      <div class="nav-routing">
        <h3 class="routing-header">[ READY TO EXPLORE? ]</h3>
        <div class="routing-grid">
            <div class="routing-section">
                <strong>‚ñ∂ Visit Lower Level 2.0</strong>
                <ul>
                    <li><a href="https://vrchat.com/home/launch?worldId=wrld_7302897c-be0f-4037-ac67-76f0ea065c2b" class="link" target="_blank">‚Üí Launch in VRChat</a></li>
                </ul>
            </div>

            <div class="routing-section">
                <strong>üìñ Read the Development Log</strong>
                <ul>
                    <li><a href="/devlog" class="link">‚Üí Full Devlog</a></li>
                </ul>
            </div>

            <div class="routing-section">
                <strong>üíª Try Basement OS</strong>
                <ul>
                    <li><a href="/terminal" class="link">‚Üí Web Demo</a></li>
                </ul>
            </div>

            <div class="routing-section">
                <strong>ü§ù Support or Collaborate</strong>
                <ul>
                    <li><a href="/support" class="link">‚Üí Get Involved</a></li>
                </ul>
            </div>
        </div>
      </div>
    </div>
  </TerminalShell>
</BaseLayout>

<script>
    document.addEventListener("astro:page-load", function() {
    const worldId = "wrld_7302897c-be0f-4037-ac67-76f0ea065c2b";
    const apiKey = "JlE5Jldo5Jibnk5O5hTx6XVqsJyIkZVd";

    const cachedStats = {
        visits: 936,
        favorites: 68,
        popularity: 42,
        updated_at: "2025-12-28T00:00:00.000Z",
        created_at: "2024-07-08T00:00:00.000Z"
    };

    const targetUrl = `https://api.vrchat.cloud/api/1/worlds/${worldId}?apiKey=${apiKey}`;
    const corsProxies = [
        `https://corsproxy.io/?${encodeURIComponent(targetUrl)}`,
        `https://api.allorigins.win/get?url=${encodeURIComponent(targetUrl)}`,
        `https://cors-anywhere.herokuapp.com/${targetUrl}`
    ];

    async function fetchWithFallback(proxies: string[]) {
        for (let i = 0; i < proxies.length; i++) {
            try {
                const response = await fetch(proxies[i]);
                if (!response.ok) continue;
                const data = await response.json();
                const worldData = data.contents ? JSON.parse(data.contents) : data;
                return worldData;
            } catch (e) { console.log(`Proxy ${i + 1} failed`); continue; }
        }
        throw new Error('All proxies failed');
    }

    function updateStats(worldData: any) {
        const formatNum = (num: number) => new Intl.NumberFormat().format(num);
        const introVisits = document.getElementById("stat-visits-intro");
        if (introVisits) introVisits.textContent = formatNum(worldData.visits) + "+";
    }

    fetchWithFallback(corsProxies)
        .then(worldData => updateStats(worldData))
        .catch(error => console.log('Using default stats'));
});
</script>
