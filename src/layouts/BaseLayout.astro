---
import '../styles/global.css';
import '../styles/shutdown.css';
import { ClientRouter } from 'astro:transitions';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Basement OS - An interactive dev blog for the Lower Level 2.0 VRChat world project" } = Astro.props;
---

<!DOCTYPE html>
<html lang="en" data-theme="synthwave">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/jpeg" href="/favicon.jpg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
        <ClientRouter />
        <script is:inline>
            // Disable browser's scroll restoration to prevent progress bar on scroll
            // Astro's ClientRouter calls history.replaceState during scroll which
            // triggers native mobile browser progress indicators
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
        </script>
        <script is:inline>
            // Immediately invoked function to set the theme before FOUC
            (function() {
                try {
                    const savedTheme = localStorage.getItem('basement-os-theme') || 'synthwave';
                    document.documentElement.setAttribute('data-theme', savedTheme);
                } catch (e) {
                    console.error('Theme detection failed', e);
                }
            })();
        </script>
	</head>
	<body>
		<slot />
	</body>
</html>
